<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>MSAN 622 Information Visualization</title>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/d3.min.js"></script>

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/bootstrap-theme.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="css/custom.css">

<style type="text/css">
    body {
        padding-top: 30px;
        padding-bottom: 20px;
    }
</style>


<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>

<body>

<!-- Fixed Navbar -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle Navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://ldmartin.github.io/MSAN622/">MSAN 622</a>
        </div>

        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>

<!-- to make the background transparent instead of grey:
 --><!-- <div style="background:transparent !important" class="jumbotron">
 -->
<div class="jumbotron color-backblue">
    <div class="container">
        <h1 align="center">Hoework 1</h1>      
    </div>
</div>

<div class="container">

<!-- <button type="button" class="btn btn-default" aria-label="Left Align">
  <span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>
</button> -->

<div class="row">
    <div class="col-lg-6">
        <div class="input-group">
            <span class="input-group-btn">
                <button class="btn btn-default" type="button" onclick="plotLetterFrequency()">
                  <span class="glyphicon glyphicon-signal" aria-hidden="true"></span>
                  <!-- <span class="glyphicon glyphicon-signal" aria-hidden="true"></span> graph it -->
                </button>
            </span>
            <input type="text" id="user-input" class="form-control" placeholder="Enter a string...">
        </div><!-- /input-group -->
    </div><!-- /.col-lg-6 -->
</div>

<div class="row">
    <div class="col-md-4">
        <h2 class="page-header" id="sectionHeader"></h2>
        <p id="printedText"><p>
    </div><!-- /.col-lg-6 -->
</div>


<style>
.bar {
  fill: steelblue;
}

.bar:hover {
  fill: brown;
}

.axis {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.x.axis path {
  display: none;
}
</style>

<div class="chart"></div>

<!-- /this is where D3 stuff goes: -->
<script language="JavaScript" type="Text/JavaScript">

      function plotLetterFrequency()
      {
        var userInput = document.getElementById('user-input');
        var fullString = userInput.value;
        // change this to take out spaces and puctuation:
        var simpleString = userInput.value;
        document.getElementById("printedText").innerHTML = fullString;
        document.getElementById("sectionHeader").innerHTML = "Letter Frequency";
      }

      function get_user_input2(){
        var user_input = decodeURI(window.location.search);
        var user_input_stripped = user_input.replace(/[^A-z]/ig, '');
            var letter_lst = user_input_stripped.split("");
            return letter_lst
      }

      function get_user_input(){
        var user_input = decodeURI(window.location.search);
        var user_input_stripped = user_input.replace(/\W/g, '')
            var input = user_input_stripped.split("").sort()
            return input
      }

      function get_letter_frequency(input){
        letter_dic = {};
            for (var i = 0; i < input.length; i++) {
                var letter = input[i];
                if (!(letter in letter_dic)){letter_dic[letter] = 0};
                letter_dic[letter] += 1;
            };

            return letter_dic
      }


      var input = get_user_input();
      var letter_freq = get_letter_frequency(input);

      console.log(letter_freq);
      // var data = d3.entries(letter_freq);

        // create lists of letters and counts from dictionary to use for bar chart:
        // these will be in alphabetical order, I think
      letters = [];
      counts = [];
      for (letter in letter_freq){ 
          letters.push(letter);
          counts.push(letter_freq[letter]);
          };

      // var data = [letter_freq];
      var data = d3.entries(letter_freq);

      var margin = {top: 20, right: 20, bottom: 30, left: 40},
          width = 960 - margin.left - margin.right,
          height = 500 - margin.top - margin.bottom;

      var x = d3.scale.ordinal()
          .rangeRoundBands([0, width], .1)
          .domain(data.map(function(d) { return d.key; }));

      var y = d3.scale.linear()
          .range([height, 0])
          .domain([0, d3.max(data, function(d) { return d.value; })]);

      var xAxis = d3.svg.axis()
          .scale(x)
          .orient("bottom");

      var yAxis = d3.svg.axis()
          .scale(y)
          .orient("left")
          .ticks(10);

      var svg = d3.select(".chart").append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
        .append("g")
          .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

      svg.append("g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + height + ")")
          .call(xAxis);

      svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 15)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Frequency");

        svg.selectAll(".bar")
            .data(data)
          .enter().append("rect")
            .attr("class", "bar")
            .attr("x", function(d) { return x(d.key); })
            .attr("width", x.rangeBand())
            .attr("y", function(d) { return y(d.value); })
            .attr("height", function(d) { return height - y(d.value); });

</script>


<hr/>
<footer>
    <p style="text-align: center;">
      <a name="contact"></a>
      <img src="img/email_logo.png" alt="" border=1 height=22 width=22></img>
      <a href="mailto:ldmartin@dons.usfca.edu">ldmartin@dons.usfca.edu</a>
      <img src="img/github_logo.png" alt="" border=1 height=20 width=20></img>
      <a href="https://github.com/ldmartin">github.com/ldmartin</a>
      <img src="img/linkedin_logo.png" alt="" border=1 height=20 width=22></img>
      <a href="https://www.linkedin.com/in/layladmartin">LinkedIn.com/layladmartin</a>
      

<!--       Layla Martin &bullet; MSAN 622 Information Visualization &bullet; Spring 2015</p> -->
</footer>

</div><!--/.container -->
    
</body>
</html>
